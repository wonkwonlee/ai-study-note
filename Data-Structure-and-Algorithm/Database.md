# 데이터베이스 Database

## 데이터베이스의 정의
<img width="723" alt="db" src="https://user-images.githubusercontent.com/28593767/116032087-fd036f80-a699-11eb-91cf-14dcab1a563f.png">

* 데이터베이스는 간단하게 말해 **데이터의 집합** 이라고 할 수 있고 **DBMS(DataBase Management System)** 는 이 데이터베이스를 관리, 운영하는 역할을 하는 소프트웨어라고 할 수 있다.
* 데이터베이스는 여러 명의 사용자나 응용 프로그램이 공유하고 동시에 접근이 가능해야 한다.
    + Excel과 같은 프로그램은 데이터의 집합으로 사용될 수 있지만, 대용량을 관리하거나 여러 명의 사용자가 공유하는 개념은 아니므로 DBMS가 아니다.
* 또한 데이터베이스는 *데이터의 저장공간 자체를 의미*하기도 한다. 
    + MySQL에서는 데이터베이스를 자료가 저장되는 디스크 공간(주로 파일로 구성)으로 취급한다.
* 종종 데이터베이스와 DBMS를 혼용해서 사용하기도 하지만 정확하게는 *데이터베이스는 데이터의 집합 또는 데이터의 저장 공간*이라고 할 수 있고 *DBMS는 데이터베이스를 운영하는 소프트웨어*를 의미한다.


## 데이터베이스의 특징
* **데이터의 무결성 Data Integrity**
    + 데이터베이스 안의 데이터는 어떤 경로를 통해 들어 왔던지 *데이터에 오류가 있어서는 안된다*.
    + 이러한 무결성을 위해서 데이터베이스는 *제약 조건*이라는 특성을 지닌다.
    + 예를 들어, 학생 데이터에서 모든 학생은 학번이 반드시 있고 각 학생의 학번은 서로 중복되면 안 되는 제약 조건이 있다면 학번 만을 가지고 정확한 학생을 추출할 수 있다.
* **데이터의 독립성 Data Independence**
    + 데이터베이스의 크기를 변경하거나 데이터 파일의 저장소를 변경하더라도 *기존에 작성된 응용프로그램은 전혀 영향을 받지 않아야 한다*.
    + 즉, 서로 의존적 관계가 아닌 *독립적인 관계*여야 한다.
    + 예를 들어, 데이터베이스가 저장된 디스크가 새 것으로 변동되어도 기존에 사용하던 응용 프로그램은 아무런 변경 없이 계속 사용되어야 한다.
* **보안 Security**
    + 데이터베이스 안의 데이터에 아무나 접근할 수 있는 것이 아니라 *데이터를 소유한 사람이나 데이터에 접근이 허가된 사람만 접근*할 수 있어야 한다.
    + 접근할 때도 *사용자의 계정에 따라서 다른 권한*을 가져야한다.
    + 최근 고객 정보 유출 사고가 빈번한 만큼 보안은 더욱 중요한 데이터베이스의 이슈라고 할 수 있다.
* **데이터 중복의 최소화 Data Duplication Avoidance**
    + 동일한 데이터가 *여러 개 중복되어 저장되는 것을 방지*한다.
    + *하나의 테이블에 저장하고 공유*함으로써 데이터 중복을 최소화 시킨다.
    + 예를 들어, 학생 정보를 교직원 별로 별도의 엑셀 파일에 저장하는 대신 데이터베이스에 통합하여 하나의 테이블에 저장해서 관리한다.
* **응용 프로그램 제작 및 수정 용이 Easy Implementation and Modification**
    + 기존 파일시스템을 사용할 때는 각각 파일의 포맷에 맞춰 개발해야 하는 응용 프로그램을 데이터 베이스를 이용함으로써 *통일된 방식으로 응용 프로그램 작성이 가능해지고 유지 보수 또한 쉬워진다.*
* **데이터의 안전성 향상 Data Durability**
    + 대부분의 DBMS가 제공하는 백업, 복원 기능을 이용함으로써, *데이터가 깨지는 문제가 발생할 경우에 원상으로 복원 또는 복구하는 방법이 명확*해진다.


## 데이터베이스의 발전
초창기의 컴퓨터에는 데이터베이스라는 개념이 없었지만 다음의 몇 가지 단계를 거치며 데이터베이스가 개발되고 사용되기 시작했다.

1. 오프라인으로 관리
    + 컴퓨터가 없던 시기에도 회사를 운영하기 위해서는 수입과 지출이 있었을 것이고 그것을 수기로 기록하며 데이터를 관리했었다.
2. 파일 시스템의 사용
    + 컴퓨터를 사용하면서 종이에 기록하던 내용을 컴퓨터 파일에 기록 저장하게 되었다. 
    + 응용 프로그램들은 파일에 저장된 내용을 읽고 쓰는 기능이 있고 컴퓨터에 저장된 파일의 내용은 읽고, 쓰기가 편한 약속된 형태의 구조를 지닌다.
    + 파일 시스템은 대개 하나의 응용 프로그램마다 하나의 데이터 파일이 할당되기 때문에 어떠한 기능을 구현하기 위해서 기능의 개수만큼 데이터 파일의 숫자가 필요하다. 
    + 따라서, 데이터의 양이 증가하면 데이터의 중복으로 인한 불일치가 발생하게 된다.
3. 데이터베이스 관리 시스템 (DBMS)
    + 파일 시스템의 단점을 보완하고 *대량의 데이터를 보다 효율적으로 관리하고 운영하기 위해서 사용*되기 시작한 것이 DBMS이다.
    + DBMS는 데이터의 집합인 데이터베이스를 잘 관리하고 운영하기 위한 시스템 또는 소프트웨어로 DBMS에 *데이터를 구축하고 관리하고 활용하기 위해서 사용되는 언어가 SQL*이다.


## DBMS 분류
* DBMS의 유형은 크게 계층형, 망형, 관계형, 객체 지향형, 그리고 객체 관계형 등으로 분류된다
* 현재 사용되는 DBMS 중에는 관계형 DBMS가 가장 많은 부분을 차지한다.
* MySQL과 Oracle 등은 대표적인 관계형 DBMS이다.

### 관계형 DBMS Relational DBMS
* 관계형 DBMS는 테이블이라 불리는 최소 단위로 구성되어 있고 각 테이블은 하나 이상의 열로 구성되어 있다.
* RDBMS는 정보를 저장하기 위해서 하나의 테이블이 아닌 *여러 개의 테이블로 나누어서 저장*함으로써 불필요한 공간의 낭비를 줄이고 데이터 저장의 효율성을 보장할 수 있다. 
* 테이블의 관계를 **기본 키(Primary Key)** 와 **외래 키(Foreign Key)** 를 사용해서 맺어 줌으로써 *두 테이블을 부모와 자식의 관계*로 묶어줄 수 있다.
    + 부모 테이블과 자식 테이블을 조합해서 결과를 얻고자 할 때는 SQL의 **조인(JOIN)** 기능을 이용한다.
* 관계형 DBMS의 장점은 다른 DBMS에 비해서 업무가 변화될 경우에 쉽게 변화에 순응할 수 있는 구조이며 *유지보수 측면에서도 편리*하다는 점이다. 
* 또한, 대용량 데이터의 관리와 데이터 무결성의 보장을 잘 해주기 때문에 *동시에 데이터에 접근하는 응용 프로그램을 사용할 경우에 RDBMS는 적절한 선택*이 될 수 있다. 
* RDBMS의 가장 큰 단점은 *시스템 자원을 많이 차지해서 시스템이 전반적으로 느려진다*는 점이다.


## 정보시스템 구축 절차 요약
정보시스템을 구축하기 위해서는 일반적으로 *분석, 설계, 구현, 시현, 유지보수*의 5가지 단계를 거친다.
* **분석 단계**
    + 구현하고자 하는 프로젝트의 가장 첫 번째 단계로 *시스템 분석 또는 요구사항 분석*이라고 하며 *현재 우리가 **무엇을** 할 것인지를 결정*한다. 
    + 사용자의 인터뷰와 업무 조사 등을 수행해야 하고 분석의 결과로서 많은 문서를 작성해야 한다.
* **설계 단계**
    + 시스템 설계 또는 프로그램 설계라고 하며 *우리가 구축하고자 하는 시스템을 **어떻게** 할 것인지를 결정*한다.
    + 시스템 설계가 끝나면 설계서에 나온 그대로 프로그램을 작성하므로 일반적으로 시스템 설계가 끝나면 가장 큰 작업이 끝난 것으로 간주한다. 
    + 대부분의 프로젝트에서 이 분석과 설계의 과정이 전체 공정의 50% 이상을 차지한다.


## 데이터베이스 모델링과 필수 용어
* 분석과 설계 과정 중에서 가장 중요한 과정 중의 하나가 **데이터베이스 모델링**이다. 
* 데이터베이스 모델링이란 *현실 세계에서 사용되는 데이터를 MySQL에 어떻게 옮겨 놓을 것인지를 결정하는 과정*이라고 할 수 있다.

<img width="1343" alt="db_diagram" src="https://user-images.githubusercontent.com/28593767/116175118-ad30b100-a74a-11eb-8695-ceee06adf20c.png">

### 데이터베이스 용어
* **데이터** : 이멋사, 컴퓨터, 2023.2.1 과 같이 하나하나의 단편적인 정보를 뜻한다. 
    + 즉, 정보는 있으나 아직 *체계화 되지 못한 상태*를 의미한다.
* **테이블** : 회원이나 제품의 데이터를 입력하기 위해, *표 형태로 표현한 것*을 의미한다. 
    + 지금은 인터넷 쇼핑몰을 구현하기 위해서, 회원에 대한 정보를 보관할 회원 테이블과 제품 정보를 보관할 제품 테이블 등 두 개의 테이블을 만들었다.
* **데이터베이스** : 테이블이 저장되는 저장소를 의미하고 보통 원통 모양으로 표현한다. 
    + 각 데이터베이스는 *서로 다른 고유한 이름*을 가지고 있어야 한다. 
    + 우리가 사용하게 될(또는 만들게 될) 데이터베이스는 쇼핑몰 데이터베이스이다.
* **DBMS** : DataBase Management System의 약자로 데이터베이스를 관리하는 시스템 또는 소프트웨어를 말한다.
* **열(=컬럼 =필드)** : 각 테이블은 열로 구성됩다. 
    + 회원 테이블의 경우에는 아이디, 회원 이름, 주소 등 3개의 열로 구성되어 있다.
* **열 이름** : 각 열을 구분하기 위한 이름으로 *각 테이블 내에서는 중복되지 않고 고유*해야 한다.
    + 회원 테이블의 아이디, 회원 이름, 주소 등이 열 이름이다.
* **데이터 형식** : *열의 데이터 형식*을 의미하고 테이블을 생성할 때 열 이름과 함께 지정해줘야 한다.
    + 회원 테이블의 회원 이름 열은 당연히 숫자 형식이 아닌, 문자 형식이어야 한다.
    + 또한, 제품 테이블의 가격 열은 숫자(특히 정수) 형식이어야 한다. 
* **행(=로우 =레코드)** : *실질적인 데이터*를 의미한다. 
    + 예를 들어 *bbb0202/김멋사/서울 은평구 증산동*이 하나의 행으로 행 데이터라고도 부른다.
    + 회원 테이블의 예로 회원이 몇 명인지는 행 데이터가 몇 개 있는지와 동일한 의미이다. 
* **기본 키(Primary Key) 열** : *기본 키 열은 각 행을 구분하는 유일한 열*을 의미하며 *중복 되어서는 안되고 비어 있어서도 안되며, 각 테이블에는 기본 키가 하나만 지정*되어 있어야 한다. 
    + 예시에서는 회원 테이블의 기본 키가 아이디 열에 지정되어 있다.
    + 아이디는 아이디 중복 확인 검사를 통해 중복되지 않게 지정되기 때문에 기본키로 설정하기에 적합하다.
* **외래 키(Foreign Key) 필드** : *두 테이블의 관계를 맺어주는 키*를 의미한다. 

<img width="1020" alt="db_proc" src="https://user-images.githubusercontent.com/28593767/116175488-5bd4f180-a74b-11eb-8580-8dbb062e4247.png">


## 데이터베이스 개체 활용

### 인덱스 Index
<img width="653" alt="idx" src="https://user-images.githubusercontent.com/28593767/116338584-ef272900-a816-11eb-9233-a44079618e2f.png">

<img width="780" alt="idx2" src="https://user-images.githubusercontent.com/28593767/116338574-eb93a200-a816-11eb-96bb-67b55802b2fe.png">

<img width="793" alt="idx3" src="https://user-images.githubusercontent.com/28593767/116338578-edf5fc00-a816-11eb-8606-23dae11cb7f3.png">

* 인덱스란 대부분의 책의 제일 뒤에 붙어있는 찾아보기와 같은 개념으로 수 많은 데이터에서 인덱스 없이 전체 데이터를 찾을 경우 시간이 매우 오래걸리게 된다.
* *데이터베이스 튜닝이란 데이터베이스의 성능을 향상시키거나 응답하는 시간을 단축시키는 것*을 의미한다. 
    + 쿼리에 대한 응답을 줄이기 위해서 가장 집중적으로 보는 부분 중 하나가 인덱스로, 인덱스를 적절히 활용하고 있느냐에 따라서 시스템의 성능이 몇 배에서 몇 십 배 이상 차이가 날 수 있다.
* 인덱스는 테이블의 열 단위에 생성된다.

### 뷰 View
<img width="566" alt="view0" src="https://user-images.githubusercontent.com/28593767/116338581-ef272900-a816-11eb-9bd6-d1556899408a.png">

![view](https://user-images.githubusercontent.com/28593767/116235627-0f180780-a799-11eb-8009-440302102605.png)

* 뷰란 *가상의 테이블*로 사용자 입장에서는 테이블과 동일하게 보이지만 뷰는 실제 행 데이터를 가지고 있지 않고 *진짜 테이블에 링크된 개념*이다.
* 따라서 뷰를 SELECT하면 실제 테이블의 데이터를 조회하는 것과 동일한 결과가 된다.
* 뷰를 이용하면 권한이 낮은 사용자가 개인 정보 유출의 위험없이 데이터를 조회할 수 있다.

### 스토어드 프로시저 Stored Procedure
<img width="606" alt="procedure" src="https://user-images.githubusercontent.com/28593767/116338585-efbfbf80-a816-11eb-8c56-61ea4ec23d58.png">

* 스토어드 프로시저란 *MySQL에서 제공해주는 프로그래밍 기능*으로 간단히 말해 *SQL문을 하나로 묶어서 편리하게 사용하는 기능*이라고 할 수 있다.
    + SQL을 묶는 개념 외에 다른 프로그래밍 언어와 같은 기능을 담당할 수도 있다. 
* 실무에서는 SQL문(주로 SELECT)을 매번 하나하나 수행하기 보다는 스토어드 프로시저를 만들어 놓은 후에 호출하는 방식을 많이 사용한다.

### 트리거 Trigger
<img width="619" alt="trigger" src="https://user-images.githubusercontent.com/28593767/116338586-f0585600-a816-11eb-85bf-44cbaf66e018.png">

* 트리거란 *테이블에 부착되어서 테이블에 INSERT나 UPDATE 또는 DELETE 작업이 발생되면 실행되는 코드*를 말한다.
* 회원이 탈퇴할 경우 회원 테이블(memberTBL) 에서 정보를 삭제하면서 자동으로 삭제될 데이터를 삭제회원 테이블(deletedMemberTBL) 에 저장할 수 있다.


## 프로젝트의 진행
* 프로젝트란 *현실 세계의 업무를 컴퓨터 시스템으로 옮겨놓는 일련의 과정*이라고 할 수 있다.
* 즉, 프로젝트란 *대규모의 프로그램을 작성하기 위한 전체 과정*이다.

### 폭포수 모델 Waterfall Model
<img width="768" alt="waterfall" src="https://user-images.githubusercontent.com/28593767/116349433-f3f5d800-a82a-11eb-9b89-edbd2a9c5dbd.png">

* *소프트웨어 공학은 다른 공학 분야의 것을 소프트웨어 분야에 가져와서 적합하도록 수정한 것으로 소프트웨어 개발 방법론의 일환*이다.
* **폭포수 모델**은 가장 오래되고 전통적으로 사용되는 소프트웨어 개발 모델로 폭포가 떨어지듯이 각 단계가 끝나면 다음 단계로 진행한다.
* 폭포수 모델의 장점은 *각 단계가 명확히 구분되어서 프로젝트의 진행 단계가 명확*해진다는 점이다.
* 폭포수 모델의 단점은 *문제점이 발생될 경우에는 다시 앞단계로 거슬러 올라가기가 어렵다*는 점이다. 
    + 또한 문제점이 초기 단계인 업무 분석이나 시스템 설계에서 나오기보다는 대부분 프로그램 구현 단계나 테스트 단계에서 나오다보니 *대부분 업무 분석 단계로 거슬러 올라가서 다시 시작*해야 한다.
* 가장 핵심적인 단계는 업무 분석과 시스템 설계로 대부분의 소프트웨어 프로젝트는 이 두 단계를 합쳐서 전체 공정의 최소 50% 이상을 할당한다.
* 실패하는 대부분의 프로젝트는 주로 프로그램 구현에 비중을 많이 두는 경우로, 복잡한 시스템을 구현하기 위해서 *구현(코딩)은 분석과 설계에 비해서 낮은 중요도*를 갖는다. 
* *데이터베이스 모델링은 분석과 설계 단계에서 가장 중요한 작업 중 하나*라고 할 수 있다.

### 데이터베이스 모델링 Database Modelling
* 데이터베이스 모델링은 ***개념적 모델링, 논리적 모델링, 물리적 모델링**의 3단계를 거쳐서 완성된다.
* 개념적 모델링은 주로 업무 분석 단계에 포함되며 논리적 모델링은 업무 분석의 후반부와 시스템 설계의 전반부에 걸쳐서 진행되고 물리적 모델링은 시스템 설계의 후반부에 주로 진행된다.


